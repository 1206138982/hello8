ARM GAS  /tmp/ccSaqJTJ.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"key.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.KEY0_init,"ax",%progbits
  16              		.align	1
  17              		.global	KEY0_init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	KEY0_init:
  25              	.LFB63:
  26              		.file 1 "hardware/src/key.c"
   1:hardware/src/key.c **** #include "key.h"
   2:hardware/src/key.c **** #include "stm32f10x.h"
   3:hardware/src/key.c **** #include "exti.h"
   4:hardware/src/key.c **** 
   5:hardware/src/key.c **** void KEY0_init(void)
   6:hardware/src/key.c **** {
  27              		.loc 1 6 1
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 8
  30              		@ frame_needed = 1, uses_anonymous_args = 0
  31 0000 80B5     		push	{r7, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 7, -8
  35              		.cfi_offset 14, -4
  36 0002 82B0     		sub	sp, sp, #8
  37              	.LCFI1:
  38              		.cfi_def_cfa_offset 16
  39 0004 00AF     		add	r7, sp, #0
  40              	.LCFI2:
  41              		.cfi_def_cfa_register 7
   7:hardware/src/key.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
   8:hardware/src/key.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOE, ENABLE);
  42              		.loc 1 8 2
  43 0006 0121     		movs	r1, #1
  44 0008 4020     		movs	r0, #64
  45 000a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
   9:hardware/src/key.c **** 
  10:hardware/src/key.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;
  46              		.loc 1 10 30
  47 000e 0823     		movs	r3, #8
  48 0010 BB80     		strh	r3, [r7, #4]	@ movhi
ARM GAS  /tmp/ccSaqJTJ.s 			page 2


  11:hardware/src/key.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
  49              		.loc 1 11 31
  50 0012 4823     		movs	r3, #72
  51 0014 FB71     		strb	r3, [r7, #7]
  12:hardware/src/key.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  52              		.loc 1 12 32
  53 0016 0323     		movs	r3, #3
  54 0018 BB71     		strb	r3, [r7, #6]
  13:hardware/src/key.c **** 	GPIO_Init(GPIOE, &GPIO_InitStructure); 
  55              		.loc 1 13 2
  56 001a 3B1D     		adds	r3, r7, #4
  57 001c 1946     		mov	r1, r3
  58 001e 0348     		ldr	r0, .L2
  59 0020 FFF7FEFF 		bl	GPIO_Init
  14:hardware/src/key.c **** }
  60              		.loc 1 14 1
  61 0024 00BF     		nop
  62 0026 0837     		adds	r7, r7, #8
  63              	.LCFI3:
  64              		.cfi_def_cfa_offset 8
  65 0028 BD46     		mov	sp, r7
  66              	.LCFI4:
  67              		.cfi_def_cfa_register 13
  68              		@ sp needed
  69 002a 80BD     		pop	{r7, pc}
  70              	.L3:
  71              		.align	2
  72              	.L2:
  73 002c 00180140 		.word	1073813504
  74              		.cfi_endproc
  75              	.LFE63:
  77              		.section	.text.KEY1_init,"ax",%progbits
  78              		.align	1
  79              		.global	KEY1_init
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  83              		.fpu softvfp
  85              	KEY1_init:
  86              	.LFB64:
  15:hardware/src/key.c **** 
  16:hardware/src/key.c **** void KEY1_init(void)
  17:hardware/src/key.c **** {
  87              		.loc 1 17 1
  88              		.cfi_startproc
  89              		@ args = 0, pretend = 0, frame = 8
  90              		@ frame_needed = 1, uses_anonymous_args = 0
  91 0000 80B5     		push	{r7, lr}
  92              	.LCFI5:
  93              		.cfi_def_cfa_offset 8
  94              		.cfi_offset 7, -8
  95              		.cfi_offset 14, -4
  96 0002 82B0     		sub	sp, sp, #8
  97              	.LCFI6:
  98              		.cfi_def_cfa_offset 16
  99 0004 00AF     		add	r7, sp, #0
 100              	.LCFI7:
ARM GAS  /tmp/ccSaqJTJ.s 			page 3


 101              		.cfi_def_cfa_register 7
  18:hardware/src/key.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
  19:hardware/src/key.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOE, ENABLE);
 102              		.loc 1 19 2
 103 0006 0121     		movs	r1, #1
 104 0008 4020     		movs	r0, #64
 105 000a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  20:hardware/src/key.c **** 
  21:hardware/src/key.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;
 106              		.loc 1 21 30
 107 000e 1023     		movs	r3, #16
 108 0010 BB80     		strh	r3, [r7, #4]	@ movhi
  22:hardware/src/key.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
 109              		.loc 1 22 31
 110 0012 4823     		movs	r3, #72
 111 0014 FB71     		strb	r3, [r7, #7]
  23:hardware/src/key.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 112              		.loc 1 23 32
 113 0016 0323     		movs	r3, #3
 114 0018 BB71     		strb	r3, [r7, #6]
  24:hardware/src/key.c **** 	GPIO_Init(GPIOE, &GPIO_InitStructure); 
 115              		.loc 1 24 2
 116 001a 3B1D     		adds	r3, r7, #4
 117 001c 1946     		mov	r1, r3
 118 001e 0348     		ldr	r0, .L5
 119 0020 FFF7FEFF 		bl	GPIO_Init
  25:hardware/src/key.c **** }
 120              		.loc 1 25 1
 121 0024 00BF     		nop
 122 0026 0837     		adds	r7, r7, #8
 123              	.LCFI8:
 124              		.cfi_def_cfa_offset 8
 125 0028 BD46     		mov	sp, r7
 126              	.LCFI9:
 127              		.cfi_def_cfa_register 13
 128              		@ sp needed
 129 002a 80BD     		pop	{r7, pc}
 130              	.L6:
 131              		.align	2
 132              	.L5:
 133 002c 00180140 		.word	1073813504
 134              		.cfi_endproc
 135              	.LFE64:
 137              		.section	.text.keys_init,"ax",%progbits
 138              		.align	1
 139              		.global	keys_init
 140              		.syntax unified
 141              		.thumb
 142              		.thumb_func
 143              		.fpu softvfp
 145              	keys_init:
 146              	.LFB65:
  26:hardware/src/key.c **** 
  27:hardware/src/key.c **** void keys_init(char key_n)
  28:hardware/src/key.c **** {
 147              		.loc 1 28 1
 148              		.cfi_startproc
ARM GAS  /tmp/ccSaqJTJ.s 			page 4


 149              		@ args = 0, pretend = 0, frame = 8
 150              		@ frame_needed = 1, uses_anonymous_args = 0
 151 0000 80B5     		push	{r7, lr}
 152              	.LCFI10:
 153              		.cfi_def_cfa_offset 8
 154              		.cfi_offset 7, -8
 155              		.cfi_offset 14, -4
 156 0002 82B0     		sub	sp, sp, #8
 157              	.LCFI11:
 158              		.cfi_def_cfa_offset 16
 159 0004 00AF     		add	r7, sp, #0
 160              	.LCFI12:
 161              		.cfi_def_cfa_register 7
 162 0006 0346     		mov	r3, r0
 163 0008 FB71     		strb	r3, [r7, #7]
  29:hardware/src/key.c **** 	switch (key_n)
 164              		.loc 1 29 2
 165 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 166 000c 0A2B     		cmp	r3, #10
 167 000e 02D0     		beq	.L8
 168 0010 0B2B     		cmp	r3, #11
 169 0012 05D0     		beq	.L9
  30:hardware/src/key.c **** 	{
  31:hardware/src/key.c **** 	case 10:
  32:hardware/src/key.c **** 		KEY0_init();
  33:hardware/src/key.c **** 		EXTI3_Init();
  34:hardware/src/key.c **** 		break;
  35:hardware/src/key.c **** 	
  36:hardware/src/key.c **** 	case 11:
  37:hardware/src/key.c **** 		KEY1_init();
  38:hardware/src/key.c **** 		EXTI4_Init();
  39:hardware/src/key.c **** 		break;
  40:hardware/src/key.c **** 
  41:hardware/src/key.c **** 	default:
  42:hardware/src/key.c **** 		break;
 170              		.loc 1 42 3
 171 0014 09E0     		b	.L11
 172              	.L8:
  32:hardware/src/key.c **** 		EXTI3_Init();
 173              		.loc 1 32 3
 174 0016 FFF7FEFF 		bl	KEY0_init
  33:hardware/src/key.c **** 		break;
 175              		.loc 1 33 3
 176 001a FFF7FEFF 		bl	EXTI3_Init
  34:hardware/src/key.c **** 	
 177              		.loc 1 34 3
 178 001e 04E0     		b	.L11
 179              	.L9:
  37:hardware/src/key.c **** 		EXTI4_Init();
 180              		.loc 1 37 3
 181 0020 FFF7FEFF 		bl	KEY1_init
  38:hardware/src/key.c **** 		break;
 182              		.loc 1 38 3
 183 0024 FFF7FEFF 		bl	EXTI4_Init
  39:hardware/src/key.c **** 
 184              		.loc 1 39 3
 185 0028 00BF     		nop
ARM GAS  /tmp/ccSaqJTJ.s 			page 5


 186              	.L11:
  43:hardware/src/key.c **** 	}
  44:hardware/src/key.c **** }
 187              		.loc 1 44 1
 188 002a 00BF     		nop
 189 002c 0837     		adds	r7, r7, #8
 190              	.LCFI13:
 191              		.cfi_def_cfa_offset 8
 192 002e BD46     		mov	sp, r7
 193              	.LCFI14:
 194              		.cfi_def_cfa_register 13
 195              		@ sp needed
 196 0030 80BD     		pop	{r7, pc}
 197              		.cfi_endproc
 198              	.LFE65:
 200              		.section	.text.key_is_high,"ax",%progbits
 201              		.align	1
 202              		.global	key_is_high
 203              		.syntax unified
 204              		.thumb
 205              		.thumb_func
 206              		.fpu softvfp
 208              	key_is_high:
 209              	.LFB66:
  45:hardware/src/key.c **** 
  46:hardware/src/key.c **** char key_is_high(char key_n)
  47:hardware/src/key.c **** {
 210              		.loc 1 47 1
 211              		.cfi_startproc
 212              		@ args = 0, pretend = 0, frame = 16
 213              		@ frame_needed = 1, uses_anonymous_args = 0
 214              		@ link register save eliminated.
 215 0000 80B4     		push	{r7}
 216              	.LCFI15:
 217              		.cfi_def_cfa_offset 4
 218              		.cfi_offset 7, -4
 219 0002 85B0     		sub	sp, sp, #20
 220              	.LCFI16:
 221              		.cfi_def_cfa_offset 24
 222 0004 00AF     		add	r7, sp, #0
 223              	.LCFI17:
 224              		.cfi_def_cfa_register 7
 225 0006 0346     		mov	r3, r0
 226 0008 FB71     		strb	r3, [r7, #7]
  48:hardware/src/key.c **** 	char status = 1;
 227              		.loc 1 48 7
 228 000a 0123     		movs	r3, #1
 229 000c FB73     		strb	r3, [r7, #15]
  49:hardware/src/key.c **** 	return status;
 230              		.loc 1 49 9
 231 000e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  50:hardware/src/key.c **** }
 232              		.loc 1 50 1
 233 0010 1846     		mov	r0, r3
 234 0012 1437     		adds	r7, r7, #20
 235              	.LCFI18:
 236              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccSaqJTJ.s 			page 6


 237 0014 BD46     		mov	sp, r7
 238              	.LCFI19:
 239              		.cfi_def_cfa_register 13
 240              		@ sp needed
 241 0016 80BC     		pop	{r7}
 242              	.LCFI20:
 243              		.cfi_restore 7
 244              		.cfi_def_cfa_offset 0
 245 0018 7047     		bx	lr
 246              		.cfi_endproc
 247              	.LFE66:
 249              		.section	.text.key_down,"ax",%progbits
 250              		.align	1
 251              		.global	key_down
 252              		.syntax unified
 253              		.thumb
 254              		.thumb_func
 255              		.fpu softvfp
 257              	key_down:
 258              	.LFB67:
  51:hardware/src/key.c **** 
  52:hardware/src/key.c **** uint8_t key_down()
  53:hardware/src/key.c **** {
 259              		.loc 1 53 1
 260              		.cfi_startproc
 261              		@ args = 0, pretend = 0, frame = 0
 262              		@ frame_needed = 1, uses_anonymous_args = 0
 263 0000 80B5     		push	{r7, lr}
 264              	.LCFI21:
 265              		.cfi_def_cfa_offset 8
 266              		.cfi_offset 7, -8
 267              		.cfi_offset 14, -4
 268 0002 00AF     		add	r7, sp, #0
 269              	.LCFI22:
 270              		.cfi_def_cfa_register 7
  54:hardware/src/key.c ****     if(GPIO_ReadInputDataBit(GPIOE,GPIO_Pin_4)==RESET)
 271              		.loc 1 54 8
 272 0004 1021     		movs	r1, #16
 273 0006 0548     		ldr	r0, .L17
 274 0008 FFF7FEFF 		bl	GPIO_ReadInputDataBit
 275 000c 0346     		mov	r3, r0
 276              		.loc 1 54 7
 277 000e 002B     		cmp	r3, #0
 278 0010 01D1     		bne	.L15
  55:hardware/src/key.c ****         return 1;
 279              		.loc 1 55 16
 280 0012 0123     		movs	r3, #1
 281 0014 00E0     		b	.L16
 282              	.L15:
  56:hardware/src/key.c ****     else
  57:hardware/src/key.c ****         return 0;
 283              		.loc 1 57 16
 284 0016 0023     		movs	r3, #0
 285              	.L16:
  58:hardware/src/key.c **** }
 286              		.loc 1 58 1
 287 0018 1846     		mov	r0, r3
ARM GAS  /tmp/ccSaqJTJ.s 			page 7


 288 001a 80BD     		pop	{r7, pc}
 289              	.L18:
 290              		.align	2
 291              	.L17:
 292 001c 00180140 		.word	1073813504
 293              		.cfi_endproc
 294              	.LFE67:
 296              		.text
 297              	.Letext0:
 298              		.file 2 "/home/ubuntu/tools/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/machine/_defa
 299              		.file 3 "/home/ubuntu/tools/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/_stdint.h
 300              		.file 4 "Inc/stm32f10x.h"
 301              		.file 5 "Drivers/Inc/stm32f10x_gpio.h"
ARM GAS  /tmp/ccSaqJTJ.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 key.c
     /tmp/ccSaqJTJ.s:16     .text.KEY0_init:0000000000000000 $t
     /tmp/ccSaqJTJ.s:24     .text.KEY0_init:0000000000000000 KEY0_init
     /tmp/ccSaqJTJ.s:73     .text.KEY0_init:000000000000002c $d
     /tmp/ccSaqJTJ.s:78     .text.KEY1_init:0000000000000000 $t
     /tmp/ccSaqJTJ.s:85     .text.KEY1_init:0000000000000000 KEY1_init
     /tmp/ccSaqJTJ.s:133    .text.KEY1_init:000000000000002c $d
     /tmp/ccSaqJTJ.s:138    .text.keys_init:0000000000000000 $t
     /tmp/ccSaqJTJ.s:145    .text.keys_init:0000000000000000 keys_init
     /tmp/ccSaqJTJ.s:201    .text.key_is_high:0000000000000000 $t
     /tmp/ccSaqJTJ.s:208    .text.key_is_high:0000000000000000 key_is_high
     /tmp/ccSaqJTJ.s:250    .text.key_down:0000000000000000 $t
     /tmp/ccSaqJTJ.s:257    .text.key_down:0000000000000000 key_down
     /tmp/ccSaqJTJ.s:292    .text.key_down:000000000000001c $d

UNDEFINED SYMBOLS
RCC_APB2PeriphClockCmd
GPIO_Init
EXTI3_Init
EXTI4_Init
GPIO_ReadInputDataBit
