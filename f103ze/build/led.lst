ARM GAS  /tmp/ccMNbKnx.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"led.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.LED_Init,"ax",%progbits
  16              		.align	1
  17              		.global	LED_Init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	LED_Init:
  25              	.LFB66:
  26              		.file 1 "hardware/src/led.c"
   1:hardware/src/led.c **** 
   2:hardware/src/led.c **** #include "led.h"
   3:hardware/src/led.c **** #include "stm32f10x.h"
   4:hardware/src/led.c **** #include "stdio.h"
   5:hardware/src/led.c **** 
   6:hardware/src/led.c **** void LED_Init(void)
   7:hardware/src/led.c **** {
  27              		.loc 1 7 1
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 8
  30              		@ frame_needed = 1, uses_anonymous_args = 0
  31 0000 80B5     		push	{r7, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 7, -8
  35              		.cfi_offset 14, -4
  36 0002 82B0     		sub	sp, sp, #8
  37              	.LCFI1:
  38              		.cfi_def_cfa_offset 16
  39 0004 00AF     		add	r7, sp, #0
  40              	.LCFI2:
  41              		.cfi_def_cfa_register 7
   8:hardware/src/led.c **** 	GPIO_InitTypeDef GPIO_InitStructure;    //GPIO��ʼ���ṹ
   9:hardware/src/led.c **** 	POWER_G_IO_RCC_ENABLE();
  42              		.loc 1 9 2
  43 0006 0121     		movs	r1, #1
  44 0008 0820     		movs	r0, #8
  45 000a FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  10:hardware/src/led.c **** 	// POWER_R_IO_RCC_ENABLE();
  11:hardware/src/led.c **** 
  12:hardware/src/led.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;//�������
  46              		.loc 1 12 31
ARM GAS  /tmp/ccMNbKnx.s 			page 2


  47 000e 1023     		movs	r3, #16
  48 0010 FB71     		strb	r3, [r7, #7]
  13:hardware/src/led.c **** 	GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
  49              		.loc 1 13 31
  50 0012 0323     		movs	r3, #3
  51 0014 BB71     		strb	r3, [r7, #6]
  14:hardware/src/led.c **** 
  15:hardware/src/led.c **** 	GPIO_InitStructure.GPIO_Pin = POWER_G_IO_PIN;
  52              		.loc 1 15 30
  53 0016 2023     		movs	r3, #32
  54 0018 BB80     		strh	r3, [r7, #4]	@ movhi
  16:hardware/src/led.c **** 	GPIO_Init(POWER_G_IO_PORT, &GPIO_InitStructure);                        //��ʼ�� IO
  55              		.loc 1 16 2
  56 001a 3B1D     		adds	r3, r7, #4
  57 001c 1946     		mov	r1, r3
  58 001e 0748     		ldr	r0, .L2
  59 0020 FFF7FEFF 		bl	GPIO_Init
  17:hardware/src/led.c **** 	
  18:hardware/src/led.c **** 	// GPIO_InitStructure.GPIO_Pin = POWER_R_IO_PIN;
  19:hardware/src/led.c **** 	// GPIO_Init(POWER_R_IO_PORT, &GPIO_InitStructure);                        //��ʼ�� IO
  20:hardware/src/led.c **** 	LED_PowerG();
  60              		.loc 1 20 2
  61 0024 2021     		movs	r1, #32
  62 0026 0548     		ldr	r0, .L2
  63 0028 FFF7FEFF 		bl	GPIO_SetBits
  64 002c 2021     		movs	r1, #32
  65 002e 0448     		ldr	r0, .L2+4
  66 0030 FFF7FEFF 		bl	GPIO_ResetBits
  21:hardware/src/led.c **** }
  67              		.loc 1 21 1
  68 0034 00BF     		nop
  69 0036 0837     		adds	r7, r7, #8
  70              	.LCFI3:
  71              		.cfi_def_cfa_offset 8
  72 0038 BD46     		mov	sp, r7
  73              	.LCFI4:
  74              		.cfi_def_cfa_register 13
  75              		@ sp needed
  76 003a 80BD     		pop	{r7, pc}
  77              	.L3:
  78              		.align	2
  79              	.L2:
  80 003c 000C0140 		.word	1073810432
  81 0040 00080140 		.word	1073809408
  82              		.cfi_endproc
  83              	.LFE66:
  85              		.section	.rodata
  86              		.align	2
  87              	.LC0:
  88 0000 6572726F 		.ascii	"error input led_n\015\000"
  88      7220696E 
  88      70757420 
  88      6C65645F 
  88      6E0D00
  89              		.section	.text.leds_init,"ax",%progbits
  90              		.align	1
  91              		.global	leds_init
ARM GAS  /tmp/ccMNbKnx.s 			page 3


  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
  95              		.fpu softvfp
  97              	leds_init:
  98              	.LFB67:
  22:hardware/src/led.c **** 
  23:hardware/src/led.c **** void leds_init(char led_n)
  24:hardware/src/led.c **** {
  99              		.loc 1 24 1
 100              		.cfi_startproc
 101              		@ args = 0, pretend = 0, frame = 16
 102              		@ frame_needed = 1, uses_anonymous_args = 0
 103 0000 80B5     		push	{r7, lr}
 104              	.LCFI5:
 105              		.cfi_def_cfa_offset 8
 106              		.cfi_offset 7, -8
 107              		.cfi_offset 14, -4
 108 0002 84B0     		sub	sp, sp, #16
 109              	.LCFI6:
 110              		.cfi_def_cfa_offset 24
 111 0004 00AF     		add	r7, sp, #0
 112              	.LCFI7:
 113              		.cfi_def_cfa_register 7
 114 0006 0346     		mov	r3, r0
 115 0008 FB71     		strb	r3, [r7, #7]
  25:hardware/src/led.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
  26:hardware/src/led.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
 116              		.loc 1 26 31
 117 000a 1023     		movs	r3, #16
 118 000c FB73     		strb	r3, [r7, #15]
  27:hardware/src/led.c **** 	GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
 119              		.loc 1 27 31
 120 000e 0323     		movs	r3, #3
 121 0010 BB73     		strb	r3, [r7, #14]
  28:hardware/src/led.c **** 	switch(led_n){
 122              		.loc 1 28 2
 123 0012 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 124 0014 002B     		cmp	r3, #0
 125 0016 02D0     		beq	.L5
 126 0018 012B     		cmp	r3, #1
 127 001a 11D0     		beq	.L6
 128 001c 21E0     		b	.L9
 129              	.L5:
  29:hardware/src/led.c **** 		case 0:
  30:hardware/src/led.c **** 			LED0_RCC_ENABLE();
 130              		.loc 1 30 4
 131 001e 0121     		movs	r1, #1
 132 0020 0820     		movs	r0, #8
 133 0022 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  31:hardware/src/led.c **** 			GPIO_InitStructure.GPIO_Pin = LED0_PIN;
 134              		.loc 1 31 32
 135 0026 2023     		movs	r3, #32
 136 0028 BB81     		strh	r3, [r7, #12]	@ movhi
  32:hardware/src/led.c **** 			GPIO_Init(LED0_PORT, &GPIO_InitStructure);
 137              		.loc 1 32 4
 138 002a 07F10C03 		add	r3, r7, #12
ARM GAS  /tmp/ccMNbKnx.s 			page 4


 139 002e 1946     		mov	r1, r3
 140 0030 1048     		ldr	r0, .L10
 141 0032 FFF7FEFF 		bl	GPIO_Init
  33:hardware/src/led.c **** 			LED0_POWER_OFF();
 142              		.loc 1 33 4
 143 0036 2021     		movs	r1, #32
 144 0038 0E48     		ldr	r0, .L10
 145 003a FFF7FEFF 		bl	GPIO_ResetBits
  34:hardware/src/led.c **** 			break;
 146              		.loc 1 34 4
 147 003e 14E0     		b	.L8
 148              	.L6:
  35:hardware/src/led.c **** 		case 1:
  36:hardware/src/led.c **** 			LED1_RCC_ENABLE();
 149              		.loc 1 36 4
 150 0040 0121     		movs	r1, #1
 151 0042 4020     		movs	r0, #64
 152 0044 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  37:hardware/src/led.c **** 			GPIO_InitStructure.GPIO_Pin = LED1_PIN;
 153              		.loc 1 37 32
 154 0048 2023     		movs	r3, #32
 155 004a BB81     		strh	r3, [r7, #12]	@ movhi
  38:hardware/src/led.c **** 			GPIO_Init(LED1_PORT, &GPIO_InitStructure);
 156              		.loc 1 38 4
 157 004c 07F10C03 		add	r3, r7, #12
 158 0050 1946     		mov	r1, r3
 159 0052 0948     		ldr	r0, .L10+4
 160 0054 FFF7FEFF 		bl	GPIO_Init
  39:hardware/src/led.c **** 			LED1_POWER_OFF();
 161              		.loc 1 39 4
 162 0058 2021     		movs	r1, #32
 163 005a 0748     		ldr	r0, .L10+4
 164 005c FFF7FEFF 		bl	GPIO_ResetBits
  40:hardware/src/led.c **** 			break;
 165              		.loc 1 40 4
 166 0060 03E0     		b	.L8
 167              	.L9:
  41:hardware/src/led.c **** 		default:
  42:hardware/src/led.c **** 			printf("error input led_n\r\n");
 168              		.loc 1 42 4
 169 0062 0648     		ldr	r0, .L10+8
 170 0064 FFF7FEFF 		bl	puts
  43:hardware/src/led.c **** 			break;
 171              		.loc 1 43 4
 172 0068 00BF     		nop
 173              	.L8:
  44:hardware/src/led.c **** 	}
  45:hardware/src/led.c **** }
 174              		.loc 1 45 1
 175 006a 00BF     		nop
 176 006c 1037     		adds	r7, r7, #16
 177              	.LCFI8:
 178              		.cfi_def_cfa_offset 8
 179 006e BD46     		mov	sp, r7
 180              	.LCFI9:
 181              		.cfi_def_cfa_register 13
 182              		@ sp needed
ARM GAS  /tmp/ccMNbKnx.s 			page 5


 183 0070 80BD     		pop	{r7, pc}
 184              	.L11:
 185 0072 00BF     		.align	2
 186              	.L10:
 187 0074 000C0140 		.word	1073810432
 188 0078 00180140 		.word	1073813504
 189 007c 00000000 		.word	.LC0
 190              		.cfi_endproc
 191              	.LFE67:
 193              		.section	.text.led_set_status,"ax",%progbits
 194              		.align	1
 195              		.global	led_set_status
 196              		.syntax unified
 197              		.thumb
 198              		.thumb_func
 199              		.fpu softvfp
 201              	led_set_status:
 202              	.LFB68:
  46:hardware/src/led.c **** 
  47:hardware/src/led.c **** void led_set_status(char led_n,char status)
  48:hardware/src/led.c **** {
 203              		.loc 1 48 1
 204              		.cfi_startproc
 205              		@ args = 0, pretend = 0, frame = 8
 206              		@ frame_needed = 1, uses_anonymous_args = 0
 207 0000 80B5     		push	{r7, lr}
 208              	.LCFI10:
 209              		.cfi_def_cfa_offset 8
 210              		.cfi_offset 7, -8
 211              		.cfi_offset 14, -4
 212 0002 82B0     		sub	sp, sp, #8
 213              	.LCFI11:
 214              		.cfi_def_cfa_offset 16
 215 0004 00AF     		add	r7, sp, #0
 216              	.LCFI12:
 217              		.cfi_def_cfa_register 7
 218 0006 0346     		mov	r3, r0
 219 0008 0A46     		mov	r2, r1
 220 000a FB71     		strb	r3, [r7, #7]
 221 000c 1346     		mov	r3, r2
 222 000e BB71     		strb	r3, [r7, #6]
  49:hardware/src/led.c **** 	switch (led_n)
 223              		.loc 1 49 2
 224 0010 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 225 0012 002B     		cmp	r3, #0
 226 0014 02D0     		beq	.L13
 227 0016 012B     		cmp	r3, #1
 228 0018 0CD0     		beq	.L14
  50:hardware/src/led.c **** 	{
  51:hardware/src/led.c **** 		case 0:
  52:hardware/src/led.c **** 			if(status)
  53:hardware/src/led.c **** 				LED0_POWER_ON();
  54:hardware/src/led.c **** 			else
  55:hardware/src/led.c **** 				LED0_POWER_OFF();
  56:hardware/src/led.c **** 		case 1:
  57:hardware/src/led.c **** 			if(status)
  58:hardware/src/led.c **** 				LED1_POWER_ON();
ARM GAS  /tmp/ccMNbKnx.s 			page 6


  59:hardware/src/led.c **** 			else
  60:hardware/src/led.c **** 				LED1_POWER_OFF();
  61:hardware/src/led.c **** 			break;
  62:hardware/src/led.c **** 		default:
  63:hardware/src/led.c **** 			break;
 229              		.loc 1 63 4
 230 001a 18E0     		b	.L19
 231              	.L13:
  52:hardware/src/led.c **** 				LED0_POWER_ON();
 232              		.loc 1 52 6
 233 001c BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 234 001e 002B     		cmp	r3, #0
 235 0020 04D0     		beq	.L16
  53:hardware/src/led.c **** 			else
 236              		.loc 1 53 5
 237 0022 2021     		movs	r1, #32
 238 0024 0C48     		ldr	r0, .L21
 239 0026 FFF7FEFF 		bl	GPIO_SetBits
 240 002a 03E0     		b	.L14
 241              	.L16:
  55:hardware/src/led.c **** 		case 1:
 242              		.loc 1 55 5
 243 002c 2021     		movs	r1, #32
 244 002e 0A48     		ldr	r0, .L21
 245 0030 FFF7FEFF 		bl	GPIO_ResetBits
 246              	.L14:
  57:hardware/src/led.c **** 				LED1_POWER_ON();
 247              		.loc 1 57 6
 248 0034 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 249 0036 002B     		cmp	r3, #0
 250 0038 04D0     		beq	.L17
  58:hardware/src/led.c **** 			else
 251              		.loc 1 58 5
 252 003a 2021     		movs	r1, #32
 253 003c 0748     		ldr	r0, .L21+4
 254 003e FFF7FEFF 		bl	GPIO_SetBits
  61:hardware/src/led.c **** 		default:
 255              		.loc 1 61 4
 256 0042 03E0     		b	.L20
 257              	.L17:
  60:hardware/src/led.c **** 			break;
 258              		.loc 1 60 5
 259 0044 2021     		movs	r1, #32
 260 0046 0548     		ldr	r0, .L21+4
 261 0048 FFF7FEFF 		bl	GPIO_ResetBits
 262              	.L20:
  61:hardware/src/led.c **** 		default:
 263              		.loc 1 61 4
 264 004c 00BF     		nop
 265              	.L19:
  64:hardware/src/led.c **** 	}
  65:hardware/src/led.c **** }
 266              		.loc 1 65 1
 267 004e 00BF     		nop
 268 0050 0837     		adds	r7, r7, #8
 269              	.LCFI13:
 270              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccMNbKnx.s 			page 7


 271 0052 BD46     		mov	sp, r7
 272              	.LCFI14:
 273              		.cfi_def_cfa_register 13
 274              		@ sp needed
 275 0054 80BD     		pop	{r7, pc}
 276              	.L22:
 277 0056 00BF     		.align	2
 278              	.L21:
 279 0058 000C0140 		.word	1073810432
 280 005c 00180140 		.word	1073813504
 281              		.cfi_endproc
 282              	.LFE68:
 284              		.text
 285              	.Letext0:
 286              		.file 2 "/home/ubuntu/tools/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/machine/_defa
 287              		.file 3 "/home/ubuntu/tools/gcc-arm-none-eabi-10-2020-q4-major/arm-none-eabi/include/sys/_stdint.h
 288              		.file 4 "Inc/stm32f10x.h"
 289              		.file 5 "Drivers/Inc/stm32f10x_gpio.h"
ARM GAS  /tmp/ccMNbKnx.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 led.c
     /tmp/ccMNbKnx.s:16     .text.LED_Init:0000000000000000 $t
     /tmp/ccMNbKnx.s:24     .text.LED_Init:0000000000000000 LED_Init
     /tmp/ccMNbKnx.s:80     .text.LED_Init:000000000000003c $d
     /tmp/ccMNbKnx.s:86     .rodata:0000000000000000 $d
     /tmp/ccMNbKnx.s:90     .text.leds_init:0000000000000000 $t
     /tmp/ccMNbKnx.s:97     .text.leds_init:0000000000000000 leds_init
     /tmp/ccMNbKnx.s:187    .text.leds_init:0000000000000074 $d
     /tmp/ccMNbKnx.s:194    .text.led_set_status:0000000000000000 $t
     /tmp/ccMNbKnx.s:201    .text.led_set_status:0000000000000000 led_set_status
     /tmp/ccMNbKnx.s:279    .text.led_set_status:0000000000000058 $d

UNDEFINED SYMBOLS
RCC_APB2PeriphClockCmd
GPIO_Init
GPIO_SetBits
GPIO_ResetBits
puts
